<!DOCTYPE html>
<html lang="en">

<head>
    <title>DevExtreme jQuery Example</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript">
        const currentThemeId = localStorage.getItem("currentThemeId") || "light";

        const link = document.createElement("link");
        link.href = `../artifacts/css/dx.${currentThemeId}.css`;
        link.type = "text/css";
        link.rel = "stylesheet";

        document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <script type="text/javascript" src="../artifacts/js/jquery.js"></script>
    <!-- HtmlEditor -->
    <!-- <script type="text/javascript" src="../artifacts/js/dx-quill.min.js"></script> -->

    <!--<script type="text/javascript" src="../artifacts/js/cldr.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/event.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/supplemental.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/unresolved.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/message.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/number.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/currency.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/date.js"></script>-->

    <!--
    <script type="text/javascript" src="../artifacts/js/exceljs.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/FileSaver.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jszip.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.plugin.autotable.min.js"></script>
    -->

    <script type="text/javascript" src="../artifacts/js/dx.all.debug.js" charset="utf-8"></script>
    <script type="text/javascript" src="./themeSelector.js"></script>
    <script type="text/javascript" src="../../../node_modules/axe-core/axe.min.js"></script>
</head>

<body class="dx-surface">
    <div role="main">
        <h1 style="position: fixed; left: 0; top: 0; clip: rect(1px, 1px, 1px, 1px);">Test header</h1>
        <style>
        </style>
        <select id="theme-selector" style="display: block;">
        </select>
        <br />
        <div id="cardview"></div>
        <script>
            const render = () => {
                const employees = [{
                    ID: 1,
                    FirstName: 'John',
                    LastName: 'Heart',
                    Prefix: 'Mr.',
                    Position: 'CEO',
                    Picture: 'images/employees/01.png',
                    BirthDate: '1964/03/16',
                    HireDate: '1995/01/15',
                    Notes: 'John has been in the Audio/Video industry since 1990. He has led DevAv as its CEO since 2003. When not working hard as the CEO, John loves to golf and bowl. He once bowled a perfect game of 300.',
                    Address: '351 S Hill St.',
                }, {
                    ID: 2,
                    FirstName: 'Olivia',
                    LastName: 'Peyton',
                    Prefix: 'Mrs.',
                    Position: 'Sales Assistant',
                    Picture: 'images/employees/09.png',
                    BirthDate: '1981/06/03',
                    HireDate: '2012/05/14',
                    Notes: 'Olivia loves to sell. She has been selling DevAV products since 2012.  Olivia was homecoming queen in high school. She is expecting her first child in 6 months. Good Luck Olivia.',
                    Address: '807 W Paseo Del Mar',
                }, {
                    ID: 3,
                    FirstName: 'Robert',
                    LastName: 'Reagan',
                    Prefix: 'Mr.',
                    Position: 'CMO',
                    Picture: 'images/employees/03.png',
                    BirthDate: '1974/09/07',
                    HireDate: '2002/11/08',
                    Notes: 'Robert was recently voted the CMO of the year by CMO Magazine. He is a proud member of the DevAV Management Team. Robert is a championship BBQ chef, so when you get the chance ask him for his secret recipe.',
                    Address: '4 Westmoreland Pl.',
                }, {
                    ID: 4,
                    FirstName: 'Greta',
                    LastName: 'Sims',
                    Prefix: 'Ms.',
                    Position: 'HR Manager',
                    Picture: 'images/employees/04.png',
                    BirthDate: '1977/11/22',
                    HireDate: '1998/04/23',
                    Notes: "Greta has been DevAV's HR Manager since 2003. She joined DevAV from Sonee Corp. Greta is currently training for the NYC marathon. Her best marathon time is 4 hours. Go Greta.",
                    Address: '1700 S Grandview Dr.',
                }, {
                    ID: 5,
                    FirstName: 'Brett',
                    LastName: 'Wade',
                    Prefix: 'Mr.',
                    Position: 'IT Manager',
                    Picture: 'images/employees/05.png',
                    BirthDate: '1968/12/01',
                    HireDate: '2009/03/06',
                    Notes: 'Brett came to DevAv from Microsoft and has led our IT department since 2012. When he is not working hard for DevAV, he coaches Little League (he was a high school pitcher).',
                    Address: '1120 Old Mill Rd.',
                }, {
                    ID: 6,
                    FirstName: 'Sandra',
                    LastName: 'Johnson',
                    Prefix: 'Mrs.',
                    Position: 'Controller',
                    Picture: 'images/employees/06.png',
                    BirthDate: '1974/11/15',
                    HireDate: '2005/05/11',
                    Notes: "Sandra is a CPA and has been our controller since 2008. She loves to interact with staff so if you've not met her, be certain to say hi. Sandra has 2 daughters both of whom are accomplished gymnasts.",
                    Address: '4600 N Virginia Rd.',
                }, {
                    ID: 7,
                    FirstName: 'Kevin',
                    LastName: 'Carter',
                    Prefix: 'Mr.',
                    Position: 'Shipping Manager',
                    Picture: 'images/employees/07.png',
                    BirthDate: '1978/01/09',
                    HireDate: '2009/08/11',
                    Notes: 'Kevin is our hard-working shipping manager and has been helping that department work like clockwork for 18 months. When not in the office, he is usually on the basketball court playing pick-up games.',
                    Address: '424 N Main St.',
                }, {
                    ID: 8,
                    FirstName: 'Cynthia',
                    LastName: 'Stanwick',
                    Prefix: 'Ms.',
                    Position: 'HR Assistant',
                    Picture: 'images/employees/08.png',
                    BirthDate: '1985/06/05',
                    HireDate: '2008/03/24',
                    Notes: 'Cindy joined us in 2008 and has been in the HR department for 2 years.  She was recently awarded employee of the month. Way to go Cindy!',
                    Address: '2211 Bonita Dr.',
                }, {
                    ID: 9,
                    FirstName: 'Kent',
                    LastName: 'Samuelson',
                    Prefix: 'Dr.',
                    Position: 'Ombudsman',
                    Picture: 'images/employees/02.png',
                    BirthDate: '1972/09/11',
                    HireDate: '2009/04/22',
                    Notes: 'As our ombudsman, Kent is on the front-lines solving customer problems and helping our partners address issues out in the field.    He is a classically trained musician and is a member of the Chamber Orchestra.',
                    Address: '12100 Mora Dr',
                }];

                function isNotEmpty(value) {
                    return value !== undefined && value !== null && value !== '';
                }
                const store = new DevExpress.data.CustomStore({
                    key: 'OrderNumber',
                    load(loadOptions) {
                        const deferred = $.Deferred();

                        const paramNames = [
                            'skip', 'take', 'requireTotalCount', 'requireGroupCount',
                            'sort', 'filter', 'totalSummary', 'group', 'groupSummary',
                        ];

                        const args = {};

                        paramNames
                            .filter((paramName) => isNotEmpty(loadOptions[paramName]))
                            .forEach((paramName) => { args[paramName] = JSON.stringify(loadOptions[paramName]); });

                        $.ajax({
                            url: 'https://js.devexpress.com/Demos/WidgetsGalleryDataService/api/orders',
                            dataType: 'json',
                            data: args,
                            success(result) {
                                deferred.resolve(result.data, {
                                    totalCount: result.totalCount,
                                    summary: result.summary,
                                    groupCount: result.groupCount,
                                });
                            },
                            error() {
                                deferred.reject('Data Loading Error');
                            },
                            timeout: 5000,
                        });

                        return deferred.promise();
                    },
                });

                $("#cardview").dxCardView({
                    columnChooser: {
                        enabled: true
                    },
                    searchPanel: {
                        visible: true
                    },
                    editing: {
                        allowAdding: true
                    },
                    repaintChangesOnly: false,
                    accessKey: 'q',
                    // dataSource: [],
                    // dataSource: store,
                    dataSource: employees,
                    noDataText: 'my text text text',
                    noDataTemplate({ text }) {
                        return $('<div>').css({ 'background-color': 'red' })
                            .append($('<span>').text('asd'))
                            .append($('<span>').text(text).css({ 'background-color': 'green' }))
                            .append($('<span>').text('asd'))
                    },
                    width: "100%",
                    // width: 750,
                    height: 700,
                    keyExpr: 'ID',
                    cardsPerRow: 3,
                    paging: {
                        pageSize: 6,
                    },
                    pager: {
                        visible: true,
                        showPageSizeSelector: true,
                        allowedPageSizes: 'auto',
                        // allowedPageSizes: [2,4,6],
                    },
                    cardMinWidth: 250,
                    cardMaxWidth: 1000,
                    allowColumnReordering: true,
                    columns: [
                        {
                            dataField: 'ID',
                            // visibleIndex: 2,
                            allowReordering: false,
                        },
                        {
                            dataField: 'FirstName',
                        },
                        {
                            dataField: 'LastName',
                        },
                        {
                            caption: 'Full Name',
                            calculateCellValue(data) {
                                return `${data.FirstName} ${data.LastName}`
                            }
                        },
                        {
                            dataField: 'Prefix',
                        },
                        {
                            dataField: 'Position',
                        },
                        {
                            dataField: 'Picture',
                        },
                        {
                            dataField: 'BirthDate',
                        },
                        {
                            dataField: 'HireDate',
                        },
                        {
                            dataField: 'Address',
                        },
                    ],
                    // columns: [
                    //     {
                    //         dataField: 'OrderNumber',
                    //         // alignment: 'right',
                    //         dataType: 'number',
                    //     },
                    //     {
                    //         dataField: 'OrderDate',
                    //         visible: false,
                    //     },
                    //     'StoreCity',
                    //     'StoreState',
                    //     'Employee',
                    //     'SaleAmount',
                    // ],
                    cardCover: {
                        // imageExpr: (data) => `https://js.devexpress.com/jQuery/Demos/WidgetsGallery/JSDemos/${data.Picture}`,
                        altExpr: 'FirstName',
                    },
                    filterPanel: { visible: true },
                    onInitialized(e) {
                        window.cardView = e.component;
                    }
                });
            };
            const clean = () => {
                cardView.dispose();
                cardView = undefined;
            }
            render();
        </script>
    </div>
</body>

</html>